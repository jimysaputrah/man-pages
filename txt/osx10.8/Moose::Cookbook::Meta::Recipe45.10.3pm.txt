Moose::Cookbook::Meta:UseriContributed Perl DMoose::Cookbook::Meta::Recipe4(3)



NAME
       Moose::Cookbook::Meta::Recipe4 - Adding a "table" attribute to the
       metaclass

SYNOPSIS
	 package MyApp::Meta::Class;
	 use Moose;
	 extends 'Moose::Meta::Class';

	 has table => (
	     is  => 'rw',
	     isa => 'Str',
	 );

DESCRIPTION
       In this recipe, we'll create a new metaclass which has a "table"
       attribute. This metaclass is for classes associated with a DBMS table,
       as one might do for an ORM.

       In this example, the table name is just a string, but in a real ORM the
       table might be an object describing the table.

THE METACLASS
       This really is as simple as the recipe "SYNOPSIS" shows. The trick is
       getting your classes to use this metaclass, and providing some sort of
       sugar for declaring the table. This is covered in
       Moose::Cookbook::Extending::Recipe2, which shows how to make a module
       like "Moose.pm" itself, with sugar like "has_table()".

   Using this Metaclass in Practice
       Accessing this new "table" attribute is quite simple. Given a class
       named "MyApp::User", we could simply write the following:

	 my $table = MyApp::User->meta->table;

       As long as "MyApp::User" has arranged to use "MyApp::Meta::Class" as
       its metaclass, this method call just works. If we want to be more
       careful, we can check the metaclass's class:

	 $table = MyApp::User->meta->table
	     if MyApp::User->meta->isa('MyApp::Meta::Class');

CONCLUSION
       Creating custom metaclass is trivial. Using it is a little harder, and
       is covered in other recipes. We will also talk about applying traits to
       a class metaclass, which is a more flexible and cooperative
       implementation.

SEE ALSO
       Moose::Cookbook::Meta::Recipe5 - The "table" attribute implemented as a
       metaclass trait

       Moose::Cookbook::Extending::Recipe2 - Acting like Moose.pm and
       providing sugar Moose-style

AUTHOR
       Dave Rolsky <autarch@urth.org>

COPYRIGHT AND LICENSE
       Copyright 2006-2010 by Infinity Interactive, Inc.

       <http://www.iinteractive.com>

       This library is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself.



perl v5.10.1			  2010-02-27 Moose::Cookbook::Meta::Recipe4(3)
